#!/bin/sh

# check if the SystemD is available
has_active_systemd=0
if command -v systemctl > /dev/null; then
    status=$(systemctl is-system-running || true)
    if [ "${status}" = "running" ] || [ "${status}" = "degraded" ] || [ "${status}" = "maintenance" ]; then
        has_active_systemd=1
    fi
fi

# restart the systemD service if needed
if [ $has_active_systemd -eq 1 ]; then
    is_active_service=$(systemctl is-active isc-stork-agent || false)
    if [ "${is_active_service}" = "active" ]; then
        systemctl restart isc-stork-agent
    fi
fi
