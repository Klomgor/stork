<ng-container *ngIf="!initError; else showInitError">
    <ng-container *ngIf="loaded; else showSpinner">
        <p-fieldset *ngIf="formGroup" legend="Global Parameters" styleClass="mt-4">
            <app-shared-parameters-form [formGroup]="formGroup.get('parameters')"> </app-shared-parameters-form>
        </p-fieldset>
        <div class="flex align-items-center m-5">
            <p-button label="Cancel" styleClass="mr-2 p-button-secondary" (onClick)="onCancel()"></p-button>
            <p-button label="Submit" [disabled]="formGroup?.invalid" (onClick)="onSubmit()"></p-button>
        </div>
    </ng-container>
</ng-container>
<ng-template #showSpinner>
    <p-progressSpinner></p-progressSpinner>
</ng-template>
<ng-template #showInitError>
    <p-fieldset legend="Errors" styleClass="mt-4">
        <p-messages severity="error">
            <ng-template pTemplate>
                <div class="flex flex-column">
                    <div class="flex align-items-center m-4">
                        In order to apply configuration changes, the server should begin a transaction between the user
                        and the server. The server should also return current data required in the form where the subnet
                        information is specified. Unfortunately, starting the new transaction failed with the following
                        error:
                    </div>
                    <div class="flex align-items-center m-4 font-italic">
                        {{ initError }}
                    </div>
                    <div class="flex align-items-center m-4">Retrying can help in some cases.</div>
                </div>
            </ng-template>
        </p-messages>
        <div class="mt-3">
            <p-button label="Retry" (onClick)="onRetry()"></p-button>
        </div>
    </p-fieldset>
</ng-template>
