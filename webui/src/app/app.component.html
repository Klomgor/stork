<div *ngIf="currentUser">
    <div class="flex align-items-center top-navbar">
        <a
            routerLink="/"
            class="logo no-underline"
            pTooltip="Version: {{ storkVersion }} <br> Build Date: {{ storkBuildDate }}"
            tooltipStyleClass="stork-version-tooltip"
            [appendTo]="logoTooltipTarget"
            [escape]="false"
            #logoTooltipTarget
        >
            <img src="assets/stork-logo-small.png" id="small-stork-logo-img" />
            <span> Stork </span>
        </a>

        <div style="flex-grow: 1">
            <p-menubar [model]="menuItems" styleClass="stork-menubar">
                <p-dropdown
                    [options]="[
                        { name: 'Blue (aura)', val: 'aura-blue' },
                        { name: 'Cyan (aura)', val: 'aura-cyan' },
                        { name: 'Purple (lara)', val: 'lara-purple' }
                    ]"
                    [(ngModel)]="selectedThemeColor"
                    optionLabel="name"
                    optionValue="val"
                    (onChange)="changeTheme(isDark, $event.value)"
                    placeholder="Pick theme color"
                />
                <p-toggleButton
                    [(ngModel)]="isDark"
                    (onChange)="changeTheme($event.checked, this.selectedThemeColor)"
                    onIcon="pi pi-moon"
                    offIcon="pi pi-sun"
                    ariaLabel="Dark/light mode"
                />

                <p-progressSpinner
                    *ngIf="(loadingInProgress | async)['state']"
                    [pTooltip]="(loadingInProgress | async)['text']"
                    [style]="{ width: '30px', height: '30px', 'vertical-align': 'top', 'margin-right': '20px' }"
                    strokeWidth="6"
                    animationDuration=".5s"
                ></p-progressSpinner>
                <app-global-search></app-global-search>
            </p-menubar>
        </div>

        <p-splitButton
            label="Logout ({{ this.currentUser.login || this.currentUser.email }})"
            icon="pi pi-sign-out"
            id="logout-button"
            [style]="{ margin: '0 0.4em 0 0.25em' }"
            (onClick)="signOut()"
            [model]="userMenuItems"
        ></p-splitButton>
    </div>
    <div>
        <app-priority-errors-panel></app-priority-errors-panel>
    </div>
</div>
<div class="m-3">
    <p-toast></p-toast>

    <router-outlet></router-outlet>
</div>
